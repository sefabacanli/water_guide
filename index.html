<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Water Guide</title>
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background-color: #fdfdfd; color: #222; line-height: 1.6; display: flex; flex-direction: column; min-height: 100vh; }
    header { text-align: center; padding: 2rem 1rem; cursor: pointer; }
    header h1 { font-size: 3rem; font-weight: 700; color: #0a84ff; margin: 0; }
    main { flex-grow: 1; display: flex; justify-content: center; align-items: center; padding: 2rem; }
    .btn { display: inline-block; padding: 0.9rem 2rem; font-size: 1rem; font-weight: 600; color: #fff; background-color: #0a84ff; border: none; border-radius: 30px; cursor: pointer; transition: background 0.3s, transform 0.2s; }
    .btn:hover { background-color: #006edc; transform: translateY(-3px); }
    .btn:active { transform: translateY(-1px); }
    form { text-align: left; }
    label { display: block; margin-bottom: 0.5rem; font-weight: 600; }
    input[type="text"], input[type="number"], select { width: 100%; padding: 0.6rem; margin-bottom: 1.5rem; border: 1px solid #ccc; border-radius: 10px; font-size: 1rem; }
    .checkbox-group { margin-bottom: 1.5rem; }
    .checkbox-group label { font-weight: normal; display: block; }
    .success-msg { display: none; margin-top: 1rem; color: green; font-weight: bold; text-align:center; }
    .menu-icon { position: absolute; top: 20px; left: 20px; font-size: 2rem; cursor: pointer; color: #0a84ff; }
    .sidebar { height: 100%; width: 0; position: fixed; top: 0; left: 0; background-color: #fff; box-shadow: 2px 0 10px rgba(0,0,0,0.1); overflow-x: hidden; transition: 0.3s; padding-top: 60px; z-index: 1000; }
    .sidebar a { padding: 12px 24px; text-decoration: none; font-size: 1.2rem; color: #333; display: block; cursor: pointer; transition: 0.2s; }
    .sidebar a:hover { background-color: #f0f0f0; }
    .sidebar .closebtn { position: absolute; top: 15px; right: 20px; font-size: 2rem; cursor: pointer; color: #0a84ff; }
    .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); }
    .modal-content { background-color: #fff; margin: 5% auto; padding: 20px; border-radius: 15px; width: 80%; max-width: 500px; box-shadow: 0 8px 20px rgba(0,0,0,0.2); text-align:center; }
    .close { color: #0a84ff; float: right; font-size: 1.5rem; font-weight: bold; cursor: pointer; }
    footer { text-align: center; padding: 1rem; font-size: 0.9rem; color: #555; background-color: #f5f5f7; border-top: 1px solid #e0e0e0; }
  </style>
</head>
<body>

<span class="menu-icon" onclick="openNav()">☰</span>
<div id="mySidebar" class="sidebar">
  <span class="closebtn" onclick="closeNav()">×</span>
  <a onclick="openModal('aboutModal')">About</a>
  <a onclick="openModal('contactModal')">Communication</a>
</div>

<header>
  <h1>Water Guide</h1>
</header>

<main>
  <div style="text-align:center; max-width:600px;">
    <h2>Welcome To</h2>
    <p>It is a scientifically based project that calculates individuals' daily water needs based on age, gender, weight, activity intensity, and environmental factors. It provides personalized guidance for a healthy life.</p>
  <button class="btn" onclick="openModal('formModal')">Support</button>
  </div>
</main>

<footer>© 2025 Water Guide | Copyright 111</footer>

<!-- Form Modal -->
<div id="formModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('formModal')">&times;</span>
    <h2>Enter Your Information</h2>
    <form id="waterForm">
      <label for="gender">Gender</label>
      <select id="gender" name="gender" required>
        <option value="" disabled selected>Select</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>

      <label for="age">Age</label>
      <select id="age" name="age" required>
        <option value="" disabled selected>Select</option>
        <option value="18-30">18-30</option>
        <option value="31-50">31-50</option>
        <option value="51+">51+</option>
      </select>

  <label for="weight">Weight (kg)</label>
  <input type="number" id="weight" name="weight" required min="30" max="200">

  <label for="activityTime">Daily Activity Duration</label>
  <input type="number" id="activityTime" name="activityTime" required min="0" max="300">

      <label for="activityLevel">Activity Level</label>
      <select id="activityLevel" name="activityLevel" required>
        <option value="" disabled selected>Select</option>
        <option value="light">Light</option>
        <option value="medium">Medium</option>
        <option value="high">High</option>
      </select>

  <label for="temperature">Temperature</label>
  <input type="number" id="temperature" name="temperature" required min="0" max="50">

  <label for="humidity">Humidity</label>
  <input type="number" id="humidity" name="humidity" required min="0" max="100">

      <div class="checkbox-group">
        <label><input type="checkbox" id="pregnant" name="pregnant"> Pregnant</label>
        <label><input type="checkbox" id="fever" name="fever"> Fever</label>
      </div>

      <button type="submit" class="btn">Send</button>
      <div class="success-msg" id="formMsg">Sent ✔</div>
    </form>
  </div>
</div>

<!-- About Modal -->
<div id="aboutModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('aboutModal')">&times;</span>
    <h2>About</h2>
    <p>Water Guide is a scientifically based project that calculates individuals' daily water needs based on age, gender, weight, activity intensity, and environmental factors. It provides personalized guidance for a healthy life.</p>
  </div>
</div>

<!-- Contact Modal -->
<div id="contactModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('contactModal')">&times;</span>
    <h2>Communication</h2>
    <p>sb@gmail.com</p>
  </div>
</div>

<script>
  function openNav() { document.getElementById("mySidebar").style.width = "250px"; }
  function closeNav() { document.getElementById("mySidebar").style.width = "0"; }
  function openModal(id) { document.getElementById(id).style.display = "block"; }
  function closeModal(id) { document.getElementById(id).style.display = "none"; }

  window.onclick = function(event) {
    ['aboutModal','contactModal','formModal'].forEach(id => {
      const modal = document.getElementById(id);
      if(event.target === modal) modal.style.display = "none";
    });
  }

  const formEl = document.getElementById('waterForm');
  const successMsg = document.getElementById('formMsg');
  const submitButton = formEl.querySelector('button[type="submit"]');
  const GAS_URL = "https://script.google.com/macros/s/AKfycbz8wN8YVSOtR13ok1l4M3jIdvbYgEdtho4ftbM1OpKKmMAGjlnGWfPFwO0SnmX1ruEIfg/exec";

  formEl.addEventListener('submit', function(e){
    e.preventDefault();

    submitButton.disabled = true;
    submitButton.textContent = "Being Sent...";
    successMsg.style.display = 'block';
    successMsg.style.color = '#555';
    successMsg.textContent = 'Please Wait...';

    // FormData'yı doğrudan kullanıyoruz
    const formData = new FormData(formEl);
    
    // Checkbox değerlerini manuel olarak ekliyoruz
    formData.set('pregnant', document.getElementById('pregnant').checked ? 'Evet' : 'Hayır');
    formData.set('fever', document.getElementById('fever').checked ? 'Evet' : 'Hayır');

    fetch(GAS_URL, {
      method: 'POST',
      body: formData,
      // 'no-cors' modu, CORS hatasını engeller ama yanıtı okuyamazsınız.
      // Bu nedenle başarı mesajını sunucudan beklemeden gösteriyoruz.
      mode: 'no-cors', 
    })
    .then(() => {
        // İstek gönderildi, sunucudan yanıt beklemiyoruz.
        successMsg.textContent = "Sent Successfully ✔";
        successMsg.style.color = "green";
        formEl.reset();
        
        setTimeout(() => {
            closeModal('formModal');
            successMsg.style.display = 'none';
        }, 2000); // 2 saniye sonra modalı kapat
    })
    .catch(err => {
        // Bu hata genellikle ağ sorunlarında ortaya çıkar
        console.error("Ağ Hatası:", err);
        successMsg.textContent = "Bir ağ hatası oluştu. İnternet bağlantınızı kontrol edin.";
        successMsg.style.color = "red";
    })
    .finally(() => {
        submitButton.disabled = false;
        submitButton.textContent = "Send";
        setTimeout(() => {
          successMsg.style.display = 'none';
        }, 6000);
    });
  });
</script>

</body>
</html>
